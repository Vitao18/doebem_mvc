div#form(layout="column")
  h2#doe(layout-align="center") Ajude aqui!
  br
  div(layout="column" flex="100")
    //- criar a funcao que vai pegar o form e jogar no server
    form#checkoutForm(name="checkoutForm" 
      layout="column" ng-submit="$ctrl.addTransaction(checkoutForm, $event)" 
      ng-switch="type"
      )
      div#values.active.formStep.limitStep(layout="column" flex="30" display="block" ng-switch-when="1")
        div
          input(type="text" ng-model= "checkoutForm.paymentInfo.initial" 
            placeholder="Valor doado" id="valor"  ui-money-mask required
            )
          br
          br
          input(name="doacao_doebem" 
            d="doacao_doebem" type="checkbox" value="" ng-model="checkoutForm.checked"
          )
          label(for="doacao_doebem").chkbox Adicione 10% para a doebem?
          h4 Total: R$ {{checkoutForm.paymentInfo.initial + checkoutForm.paymentInfo.additional}}
      div#info.formStep(layout="column" flex="30" display="none" ng-switch-when="2")
        md-input-container.md-block(flex-gt-sm).containerForm
          input(placeholder = "Nome" ng-model="checkoutForm.donor.name" required)
        md-input-container.md-block.containerForm
          input(placeholder = "Email" type="email" ng-model="checkoutForm.donor.email" required)
        md-input-container.md-block.containerForm
          input(placeholder = "CPF" ng-model="checkoutForm.donor.cpf" ui-br-cpf-mask required) 
        md-input-container.md-block.containerForm
          input(placeholder = "Cidade" ng-model="checkoutForm.donor.cidade" required)
        md-input-container.md-block.containerForm#whereListened
          md-select(ng-model="checkoutForm.donor.source" placeholder="Como você ouviu falar de nós?" required)
            md-option(ng-value="opt" ng-repeat="opt in $ctrl.source") {{ opt }}  
      div#creditCard.formStep.limitStep(layout="column" flex="100" display="none" ng-switch-when="3")
        md-input-container.md-block(flex-gt-sm).containerForm
          input(placeholder="Número do Cartão" 
            type="text" ng-model="checkoutForm.paymentInfo.ccInfo.number" 
            name="number" payments-validate="card" payments-format="card" 
            payments-type-model="checkoutForm.paymentInfo.ccInfo.brand"  
            payments-length="card" ng-class="checkoutForm.paymentInfo.ccInfo.brand" required
            )
          md-icon(ng-class="checkoutForm.paymentInfo.ccInfo.brand")
          div(ng-messages="checkoutForm.paymentInfo.ccInfo.number.$error" role="alert")
            div(ng-message-exp="['required']")
              span Cartão inválido, favor informar um cartão válido
        md-input-container.md-block.containerForm
          input(placeholder="Validade do Cartão" type="text"
                ng-model="checkoutForm.paymentInfo.ccInfo.ExpDate" 
                payments-validate="expiry" payments-format="expiry" required)
          div(ng-messages="contactForm.paymentInfoccInfo.ExpDate.$error" role="alert")
            div(ng-message-exp="['required']")
              span O campo deve ser escrito da seguinte maneira MM / AA
        md-input-container.md-block.containerForm
          input(placeholder="Código de Segurança" type="text" ng-model="checkoutForm.paymentInfo.ccInfo.securityCode" 
                ng-pattern="/^[0-9]{3,4}$/" payments-validate="cvc" payments-format="cvc" required)
      div.controls
          button.checkoutFormStepChange.checkoutFormStepChangeNext.btn.btn-block.btn-step.btn-next(ng-show="showNext" ng-click="nextView()" type="button") Continuar
          button.checkoutFormStepChange.btn.btn-block.btn-clear.btn-step.btn-prev(ng-show="showPrevious" ng-click="previousView()"  type="button") Voltar
      div(layout="column" layout-align="center center")#formSubmit
          md-button.md-raized.md-primary.ng-hide#checkoutFormSubmit(ng-show="showSend" type="submit") Enviar

script(type="text/ng-template" id="dialogDonationMade.tmpl.pug")
  md-dialog(aria-label="donationMade")
    form(ng-cloak)
      md-toolbar
        div.md-toolbar-tools
          h2 Doação realizada com sucesso!
          span(flex)
          md-button.md-icon-button(aria-label="md-button ok", ng-click="cancel()")
            md-icon
              ng-md-icon.name(icon="close" style="fill: white")
      md-dialog-content
        div.md-dialog-content
          h2 {{$ctrl.name}}, muito obrigado pela sua doação! :)
      md-dialog-actions(layout="row")
        span(flex)
        md-button(ng-click="cancel()") Ok